以下是完善后的 **游戏规则**，增加了更多细节和示例，确保规则更加清晰易懂：

---

## 游戏规则

### **1. 游戏概述**
- 这是一个多人在线硬币翻转游戏，玩家们需要在多个轮次中完成硬币翻转任务。
- 游戏的目标是协作完成所有轮次的硬币翻转任务，最终完成游戏。

---

### **2. 游戏流程**
1. **创建游戏**：
   - 创建者指定玩家数量（2-5 人）。
   - 游戏创建后，生成唯一的游戏 ID，其他玩家可以通过游戏 ID 加入。

2. **加入游戏**：
   - 所有玩家加入后，创建者可以开始游戏。
   - 游戏开始后，玩家按照加入顺序依次执行任务。

3. **游戏轮次**：
   - 游戏分为 **4 个轮次**，每个轮次需要翻转 **20 枚硬币**。
   - 每个轮次的硬币被分成不同数量的 **子批次**，具体如下：
     - **第 1 轮**：1 个批次，每个批次有 20 枚硬币。
     - **第 2 轮**：2 个批次 × 每个批次 10 枚（共 20 枚）。
     - **第 3 轮**：4 个批次 × 每个批次 5 枚（共 20 枚）。
     - **第 4 轮**：10 个批次 × 每个批次 2 枚（共 20 枚）。

4. **任务分配**：
   - 每个批次的硬币任务会分配给当前玩家。
   - 玩家需要将硬币翻转到指定的一面（正面或反面）。

5. **子批次处理**：
   - 每个批次的子批次任务按顺序分配给玩家。
   - 当一个玩家完成一个子批次后，下一个玩家可以开始处理对应的子批次。
   - 当前玩家可以继续处理当前轮次的其他子批次。

6. **任务传递**：
   - 当一个批次的所有子批次完成后，任务会传递给下一个玩家。
   - 最后一个玩家完成所有轮次的任务后，游戏结束。

---

### **3. 详细规则**

#### **第 1 轮：1 个批次 × 20 枚硬币**
- **任务分配**：
  - 所有 20 枚硬币分配给第一个玩家。
- **任务完成**：
  - 第一个玩家完成所有 20 枚硬币翻转后，任务传递给第二个玩家。
- **示例**：
  - 玩家 A 完成 20 枚硬币翻转后，玩家 B 开始处理第 1 轮的 20 枚硬币。

#### **第 2 轮：2 个批次 × 10 枚硬币**
- **任务分配**：
  - 第 2 轮分为 2 个子批次，每个子批次有 10 枚硬币。
  - 第一个玩家处理第一批次（10 枚硬币），第二个玩家处理第二批次（10 枚硬币）。
- **任务完成**：
  - 第一个玩家完成第一批次后，第二个玩家可以开始处理第二批次。
  - 同时，第一个玩家可以继续处理第二批次。
- **示例**：
  - 玩家 A 完成第一批次（10 枚硬币）后，玩家 B 开始处理第二批次（10 枚硬币）。
  - 玩家 A 可以继续处理第二批次（10 枚硬币）。

#### **第 3 轮：4 个批次 × 5 枚硬币**
- **任务分配**：
  - 第 3 轮分为 4 个子批次，每个子批次有 5 枚硬币。
  - 每个子批次按顺序分配给玩家。
- **任务完成**：
  - 当一个玩家完成一个子批次后，下一个玩家可以开始处理对应的子批次。
  - 当前玩家可以继续处理其他子批次。
- **示例**：
  - 玩家 A 完成第 1 子批次（5 枚硬币）后，玩家 B 开始处理第 2 子批次（5 枚硬币）。
  - 玩家 A 可以继续处理第 3 子批次（5 枚硬币）。

#### **第 4 轮：10 个批次 × 2 枚硬币**
- **任务分配**：
  - 第 4 轮分为 10 个子批次，每个子批次有 2 枚硬币。
  - 每个子批次按顺序分配给玩家。
- **任务完成**：
  - 当一个玩家完成一个子批次后，下一个玩家可以开始处理对应的子批次。
  - 当前玩家可以继续处理其他子批次。
- **示例**：
  - 玩家 A 完成第 1 子批次（2 枚硬币）后，玩家 B 开始处理第 2 子批次（2 枚硬币）。
  - 玩家 A 可以继续处理第 3 子批次（2 枚硬币）。

---

### **4. 游戏结束**
- 当最后一个玩家完成最后一轮的所有批次后，游戏结束。
- 游戏结束后，显示所有玩家的完成时间和任务统计。

---

### **5. 示例流程**

#### **2 人游戏示例**
1. **第 1 轮**：
   - 玩家 A 完成 20 枚硬币翻转。
   - 玩家 B 开始处理第 1 轮的 20 枚硬币。

2. **第 2 轮**：
   - 玩家 A 完成第一批次（10 枚硬币）。
   - 玩家 B 开始处理第二批次（10 枚硬币）。
   - 玩家 A 继续处理第二批次（10 枚硬币）。

3. **第 3 轮**：
   - 玩家 A 完成第 1 子批次（5 枚硬币）。
   - 玩家 B 开始处理第 2 子批次（5 枚硬币）。
   - 玩家 A 继续处理第 3 子批次（5 枚硬币）。

4. **第 4 轮**：
   - 玩家 A 完成第 1 子批次（2 枚硬币）。
   - 玩家 B 开始处理第 2 子批次（2 枚硬币）。
   - 玩家 A 继续处理第 3 子批次（2 枚硬币）。

5. **游戏结束**：
   - 玩家 B 完成最后一轮的所有批次，游戏结束。

---
注意 ！ 当一个玩家完成一个子批次后，点击“Complete this batch“的按钮不能够刷新其他玩家正在执行的子批次，确保每个玩家的完成按钮都是独立的。
### **6. 开发说明**
- **后端**：使用 FastAPI 框架，提供 REST API 和 WebSocket 支持。
- **前端**：使用 React 和 Material-UI 构建用户界面。
- **实时更新**：使用 WebSocket 实现实时游戏状态更新。

---

通过以上规则，玩家可以清晰地理解游戏流程和任务分配方式，确保游戏体验流畅且有趣。