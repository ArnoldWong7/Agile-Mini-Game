{"ast":null,"code":"var _jsxFileName = \"/Users/huanghao/Desktop/Ball Point Game/src/App.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Alert, CircularProgress, Container, Card, Box, Typography, Tabs, Tab, TextField, Button, TableContainer, Table, TableHead, TableBody, TableCell, TableRow } from '@mui/material';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MAX_PLAYERS = 5;\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL || 'http://172.20.10.4:8080';\nconst WS_URL = process.env.REACT_APP_WS_URL || 'ws://172.20.10.4:8080/ws';\nconst ws = new WebSocket(WS_URL);\nfunction App() {\n  _s();\n  const [gameId, setGameId] = React.useState(null);\n  const [game, setGame] = React.useState(null);\n  const [error, setError] = React.useState(null);\n  const [activeTab, setActiveTab] = React.useState(0);\n  const [playerId, setPlayerId] = React.useState(null);\n  const [playerName, setPlayerName] = React.useState('');\n  const [playerCount, setPlayerCount] = React.useState(MAX_PLAYERS);\n  const [joinGameId, setJoinGameId] = React.useState('');\n  const [roundCount, setRoundCount] = React.useState(5);\n  const [timeLeave, setTimeLeave] = React.useState(120);\n  const [count, setCount] = React.useState(1);\n  React.useEffect(() => {\n    // sync with server\n    ws.onmessage = msg => {\n      const data = JSON.parse(msg.data);\n      if (data.gameId === gameId) {\n        setGame(data);\n      }\n    };\n    const handleKeyDown = e => {\n      if (e.key === 'v') {\n        console.log('Game state:', game);\n        console.log('Current playerId:', playerId);\n        return;\n      }\n      if (gameId && game && game.status === 'in_progress') {\n        const player = game.players.find(player => player.id === playerId);\n        if (!player) {\n          console.log('Player not found with ID:', playerId);\n          console.log('Available players:', game.players);\n          return;\n        }\n        console.log('Processing key:', e.key, 'for player:', player.name);\n        const balls = player.balls;\n        const ball = balls[balls.length - 1];\n        // 按键 r\n        if (e.key === 'r') {\n          if (ball && ball.color === 'red') {\n            if (count === 2) {\n              ball.color = game.config.balls[Math.floor(Math.random() * 3)];\n              ball.position += 1;\n              if (ball.position > game.config.blocks) {\n                ball.position = 1;\n              }\n              setCount(1);\n            } else {\n              setCount(2);\n            }\n          }\n          axios.post(`${SERVER_URL}/update_game`, {\n            game_id: gameId,\n            players: game.players\n          });\n        }\n        // 按键 g\n        if (e.key === 'g') {\n          if (ball && ball.color === 'green') {\n            if (count === 2) {\n              ball.color = game.config.balls[Math.floor(Math.random() * 3)];\n              ball.position += 1;\n              if (ball.position > game.config.blocks) {\n                ball.position = 1;\n              }\n              setCount(1);\n            } else {\n              setCount(2);\n            }\n          }\n          axios.post(`${SERVER_URL}/update_game`, {\n            game_id: gameId,\n            players: game.players\n          });\n        }\n        // 按键 b\n        if (e.key === 'b') {\n          if (ball && ball.color === 'blue') {\n            if (count === 2) {\n              ball.color = game.config.balls[Math.floor(Math.random() * 3)];\n              ball.position += 1;\n              if (ball.position > game.config.blocks) {\n                ball.position = 1;\n              }\n              setCount(1);\n            } else {\n              setCount(2);\n            }\n          }\n          axios.post(`${SERVER_URL}/update_game`, {\n            game_id: gameId,\n            players: game.players\n          });\n        }\n        if (ball && ball.position > game.config.blocks) {\n          balls.splice(balls.length - 1, 1);\n          axios.post(`${SERVER_URL}/update_game`, {\n            game_id: gameId,\n            players: game.players\n          }).then(res => {\n            setGame(res.data);\n          }).catch(err => {\n            setError(err.message);\n          });\n        }\n        if (e.key === 'Enter') {\n          if (!ball) {\n            console.log('No ball to pass');\n            return;\n          }\n          console.log('Current ball:', ball);\n          console.log('Current ball process:', ball.process);\n          // by ball position find the player\n          const nextPlayer = game.players.find(player => player.position === ball.position);\n          console.log('Next player:', nextPlayer);\n          if (nextPlayer && nextPlayer.id !== player.id) {\n            console.log('Attempting to pass ball to player:', nextPlayer.name);\n            // Add the next player to the ball's process\n            if (!ball.process.includes(nextPlayer.index)) {\n              console.log('Ball passed successfully');\n              ball.process.push(nextPlayer.index);\n              ball.position = nextPlayer.position;\n              ball.playerId = nextPlayer.id;\n              ball.color = game.config.balls[Math.floor(Math.random() * 3)];\n              nextPlayer.balls = [ball, ...nextPlayer.balls];\n            } else {\n              console.log('Ball already passed to this player');\n            }\n          } else {\n            console.log('Invalid pass target');\n          }\n          balls.splice(balls.length - 1, 1);\n          axios.post(`${SERVER_URL}/update_game`, {\n            game_id: gameId,\n            players: game.players\n          }).then(res => {\n            setGame(res.data);\n          }).catch(err => {\n            setError(err.message);\n          });\n        }\n        // 按键 n\n        if (e.key === 'n') {\n          if (player.index === 1) {\n            player.balls.push({\n              color: game.config.balls[Math.floor(Math.random() * 3)],\n              position: player.position,\n              process: [player.index],\n              playerId: player.id,\n              index: player.index\n            });\n          }\n          axios.post(`${SERVER_URL}/update_game`, {\n            game_id: gameId,\n            players: game.players\n          }).then(res => {\n            setGame(res.data);\n          }).catch(err => {\n            setError(err.message);\n          });\n        }\n        if (e.key === 'p') {\n          const currentPlayer = game.players.find(p => p.id === playerId);\n          // 只有 index 1 的玩家可以删除球\n          if (currentPlayer && currentPlayer.index === 1) {\n            // 找到所有玩家中有完成传递球的玩家\n            const playerWithCompleteBall = game.players.find(player => player.balls.some(b => b.process && b.process.sort().join('') === '1' + game.players.map(p => p.index).sort().join('')));\n            if (playerWithCompleteBall) {\n              const newGame = {\n                ...game\n              };\n              // 更新分数\n              newGame.results[game.currentRound - 1].score += 1;\n\n              // 找到对应的玩家并更新他的球\n              const updatedPlayer = newGame.players.find(p => p.id === playerWithCompleteBall.id);\n              if (updatedPlayer) {\n                updatedPlayer.balls = updatedPlayer.balls.filter(b => !b.process || b.process.sort().join('') !== '1' + game.players.map(p => p.index).sort().join(''));\n              }\n              setGame(newGame);\n\n              // 更新游戏状态\n              axios.post(`${SERVER_URL}/update_game`, {\n                game_id: gameId,\n                players: newGame.players\n              }).then(res => {\n                setGame(res.data);\n              }).catch(err => {\n                setError(err.message);\n              });\n\n              // 更新分数\n              axios.post(`${SERVER_URL}/update_results`, {\n                game_id: gameId,\n                results: newGame.results\n              }).then(res => {\n                setGame(res.data);\n              }).catch(err => {\n                setError(err.message);\n              });\n            }\n          }\n        }\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    const timer = setInterval(() => {\n      if (game && game.status === 'in_progress' && game.players.find(player => player.id === playerId).isOwn) {\n        const newGame = {\n          ...game\n        };\n        setTimeLeave(timeLeave - 1);\n        if (timeLeave < 0 && newGame.currentRound < newGame.config.rounds) {\n          newGame.currentRound += 1;\n          newGame.status = 'waiting';\n          newGame.remainingTime = 120;\n          setTimeLeave(120);\n        } else if (timeLeave < 0 && newGame.currentRound === newGame.config.rounds) {\n          newGame.status = 'end';\n          clearInterval(timer);\n        }\n        setGame(newGame);\n        axios.post(`${SERVER_URL}/update_round_time_status`, {\n          game_id: gameId,\n          remainingTime: timeLeave,\n          status: newGame.status,\n          currentRound: newGame.currentRound\n        });\n      }\n    }, 1000);\n    return () => {\n      clearInterval(timer);\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [game, gameId, playerId, timeLeave]);\n  const handleCreateGame = e => {\n    e.preventDefault();\n    axios.post(`${SERVER_URL}/create_game`, {\n      name: playerName,\n      player_count: playerCount,\n      round_count: 5\n    }).then(res => {\n      setGameId(res.data.game.gameId);\n      setGame(res.data.game);\n      setPlayerId(res.data.playerId);\n      setError(null);\n    }).catch(err => {\n      setError(err.message);\n    });\n  };\n  const handleJoinGame = e => {\n    e.preventDefault();\n    axios.post(`${SERVER_URL}/join_game`, {\n      name: playerName,\n      game_id: joinGameId\n    }).then(res => {\n      setGameId(res.data.game.gameId);\n      setGame(res.data.game);\n      setPlayerId(res.data.playerId);\n      setError(null);\n    }).catch(err => {\n      setError(err.message);\n    });\n  };\n  const startGame = () => {\n    // players should be more than 1\n    if (game.players.length < game.config.playerCount) {\n      setError(`Minimum ${game.config.playerCount} players required to start the game`);\n      return;\n    }\n    let flag = 0;\n    // players positon should be unique\n    // players position should be between 1 and 20\n    // players position should be at least 2 blocks apart\n    game.players.forEach((player, index) => {\n      if (player.position < 1 || player.position > game.config.blocks) {\n        flag = 1;\n      }\n      if (index > 0 && Math.abs(player.position - game.players[index - 1].position) < 2) {\n        flag = 2;\n      }\n    });\n    if (flag === 1) {\n      setError('Invalid player position');\n      return;\n    }\n    if (flag === 2) {\n      setError('Players should be at least 2 blocks apart');\n      return;\n    }\n    setTimeLeave(120); // Reset time to 120 seconds when starting the game\n    const newGame = {\n      ...game\n    };\n    newGame.config.roundCount = roundCount;\n    setGame(newGame);\n    axios.post(`${SERVER_URL}/start_game`, {\n      game_id: gameId,\n      player_id: playerId,\n      players: game.players,\n      round_count: roundCount\n    }).then(res => {\n      setGame(res.data);\n      setError(null);\n    }).catch(err => {\n      setError(err.message);\n    });\n  };\n  const renderCircle = React.useCallback(index => {\n    let result = [];\n    for (let i = 0; i < game.players.length; i++) {\n      const player = game.players[i];\n      for (let j = 0; j < game.players[i].balls.length; j++) {\n        if (game.players[i].balls[j].position - 1 === index) {\n          result.push(/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              background: \"gray\",\n              marginTop: \"10px\",\n              padding: 2,\n              display: 'flex',\n              flexDirection: \"row\",\n              alignItems: 'center',\n              justifyContent: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [player.name, \":\", game.players[i].balls[j].process.sort().join('') === '1' + game.players.map(player => player.index).sort().join('') ? 'end' : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                width: 20,\n                height: 20,\n                borderRadius: '50%',\n                background: game.players[i].balls[j].color,\n                ml: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 15\n            }, this)]\n          }, game.players[i].balls[j].position, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this));\n        }\n      }\n    }\n    return result;\n  }, [game]);\n  const renderGameProgress = () => {\n    const currentRoundResult = game.results[game.currentRound - 1] || {\n      score: 0\n    };\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 3,\n        backgroundColor: 'background.default',\n        minHeight: '100vh'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 3\n        },\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h4\",\n            sx: {\n              mb: 1,\n              color: 'primary.main'\n            },\n            children: [\"Game ID: \", game.gameId, \" \\xA0\\xA0 Status: \", game.status === 'waiting' ? 'Waiting' : game.status === 'in_progress' ? 'In Progress' : 'Completed']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            sx: {\n              color: 'text.primary'\n            },\n            children: [\"Player Name: \", game.players.find(player => player.id === playerId).name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            sx: {\n              color: 'text.primary'\n            },\n            children: [\"Current Round: \", game.currentRound, \" / \", game.config.rounds, \" Score: \", currentRoundResult.score]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            sx: {\n              color: 'text.primary'\n            },\n            children: [\"Remaining time: \", game.players.find(player => player.id === playerId).isOwn ? timeLeave : game.remainingTime - 1, \" seconds\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            sx: {\n              color: 'text.primary'\n            },\n            children: [\"Balls: \", game.players.find(player => player.id === playerId).balls.map(ball => ball.color).join(', ')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        className: \"flex justify-center items-center\",\n        sx: {\n          border: '1px solid #ccc',\n          borderRadius: 1,\n          p: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          className: \"flex justify-start flex-wrap\",\n          sx: {\n            width: 1000,\n            height: 1000,\n            position: 'relative'\n          },\n          children: Array(game.config.blocks).fill(0).map((_, index) => {\n            const totalBlocks = game.config.blocks;\n            const radius = 500; // 设定半径\n            const angle = index / totalBlocks * 2 * Math.PI; // 计算角度\n            const centerX = 540; // 圆心 X 坐标\n            const centerY = 540; // 圆心 Y 坐标\n            const x = centerX + radius * Math.cos(angle) - 50; // X 位置（调整偏移量）\n            const y = centerY + radius * Math.sin(angle) - 50; // Y 位置（调整偏移量）\n\n            return /*#__PURE__*/_jsxDEV(Box, {\n              className: \"flex flex-col justify-center items-center\",\n              sx: {\n                width: 100,\n                minHeight: 100,\n                border: '1px solid #ccc',\n                mr: 1,\n                mt: 1,\n                background: 'white',\n                position: 'absolute',\n                left: x,\n                top: y\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                sx: {\n                  color: 'black',\n                  whiteSpace: 'wrap',\n                  display: game.players.some(player => player.position - 1 === index) ? 'block' : 'none'\n                },\n                children: [\"Index: \", game.players.some(player => player.position - 1 === index) ? game.players.find(player => player.position - 1 === index).index : '']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 419,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                sx: {\n                  color: 'black',\n                  whiteSpace: 'wrap',\n                  display: 'block'\n                },\n                children: game.players.some(player => player.position - 1 === index) ? game.players.find(player => player.position - 1 === index).name : ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  flexDirection: \"column\",\n                  justifyContent: 'center',\n                  alignItems: 'center',\n                  width: \"100%\"\n                },\n                children: renderCircle(index).map(item => item)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this);\n  };\n  const renderStatices = () => {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 3,\n        backgroundColor: 'background.default',\n        minHeight: '100vh',\n        display: \"flex\",\n        flexDirection: \"column\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        sx: {\n          mb: 3,\n          textAlign: 'center',\n          color: 'primary.main'\n        },\n        children: \"Game Summary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        fullWidth: true,\n        variant: \"contained\",\n        type: \"submit\",\n        onClick: () => {\n          setGameId(null);\n          setGame(null);\n          setPlayerId(null);\n          setError(null);\n          setActiveTab(0);\n          setPlayerCount(MAX_PLAYERS);\n          setPlayerName('');\n          setRoundCount(5);\n          setTimeLeave(120);\n          setCount(1);\n        },\n        sx: {\n          mb: 3\n        },\n        children: \"Restart Game\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n        sx: {\n          mb: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          size: \"medium\",\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Round\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: \"Current Score\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: game.results.map((result, index) => /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                component: \"th\",\n                scope: \"row\",\n                children: [\"Round \", result.round]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: result.score\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 7\n    }, this);\n  };\n  const renderGame = () => {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 3,\n        backgroundColor: 'background.default',\n        minHeight: '100vh'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 3\n        },\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h4\",\n            sx: {\n              mb: 1,\n              color: 'primary.main'\n            },\n            children: [\"Game ID: \", game.gameId, \" \\xA0\\xA0\", game.players.some(player => player.id === playerId) && game.players.find(player => player.id === playerId).isOwn && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              onClick: startGame,\n              disabled: game.status !== 'waiting',\n              children: \"Start Game\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            sx: {\n              color: 'text.primary'\n            },\n            children: [\"Current Round: \", game.currentRound]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            sx: {\n              color: 'text.primary'\n            },\n            children: [\"Status: \", game.status === 'waiting' ? 'Waiting' : game.status === 'in_progress' ? 'In Progress' : 'Completed']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            label: \"Round Score target\",\n            type: \"number\",\n            required: true,\n            value: roundCount,\n            onChange: e => setRoundCount(Number(e.target.value)),\n            helperText: \"Round Score target\",\n            sx: {\n              mb: 3,\n              display: game.players.find(player => player.id === playerId).isOwn ? 'block' : 'none'\n            },\n            autoComplete: \"off\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n        sx: {\n          mb: 3,\n          maxWidth: 400\n        },\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          size: \"medium\",\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Round\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: \"Score\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 537,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 534,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: game.results.map((result, index) => /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                component: \"th\",\n                scope: \"row\",\n                children: [\"Round \", result.round]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 544,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: result.score\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 547,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          border: '1px solid #ccc',\n          borderRadius: 1,\n          display: game.players.find(player => player.id === playerId).isOwn ? 'block' : 'none'\n        },\n        children: game.players.map((player, index) => /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            mt: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            sx: {\n              color: 'text.primary'\n            },\n            children: [\"Player Name: \", player.name, \" Index: \", player.index, \" ID: \", player.id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Position\",\n            type: \"text\",\n            value: player.position,\n            onChange: e => {\n              if (e.target.value < 1 || e.target.value > game.config.blocks) {\n                setError('Position must be between 1 and 20');\n                return;\n              }\n              setError(null);\n              const newGame = {\n                ...game\n              };\n              newGame.players[index].position = Number(e.target.value);\n              // sort players by position\n              const players = JSON.parse(JSON.stringify(newGame.players)).sort((a, b) => a.position - b.position);\n              newGame.players.forEach((player, index) => {\n                players.forEach((p, i) => {\n                  if (player.id === p.id) {\n                    player.index = i + 1;\n                  }\n                });\n              });\n              setGame(newGame);\n              axios.post(`${SERVER_URL}/update_game`, {\n                game_id: gameId,\n                players: newGame.players\n              }).then(res => {\n                setGame(res.data);\n              }).catch(err => {\n                setError(err.message);\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        className: \"flex justify-center items-center\",\n        sx: {\n          border: '1px solid #ccc',\n          borderRadius: 1,\n          p: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          className: \"flex justify-start flex-wrap relative\",\n          sx: {\n            width: 1000,\n            height: 1000,\n            position: 'relative'\n          },\n          children: Array(game.config.blocks).fill(0).map((_, index) => {\n            const totalBlocks = game.config.blocks;\n            const radius = 500; // 设定半径\n            const angle = index / totalBlocks * 2 * Math.PI; // 计算角度\n            const centerX = 540; // 圆心 X 坐标\n            const centerY = 540; // 圆心 Y 坐标\n            const x = centerX + radius * Math.cos(angle) - 50; // X 位置（调整偏移量）\n            const y = centerY + radius * Math.sin(angle) - 50; // Y 位置（调整偏移量）\n\n            return /*#__PURE__*/_jsxDEV(Box, {\n              className: \"flex flex-col justify-center items-center\",\n              sx: {\n                width: 100,\n                height: 100,\n                border: '1px solid #ccc',\n                mr: 1,\n                mt: 1,\n                background: game.players.some(player => player.position - 1 === index) ? 'blue' : 'white',\n                position: 'absolute',\n                left: x,\n                top: y\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                sx: {\n                  color: game.players.some(player => player.position - 1 === index) ? 'white' : 'black',\n                  whiteSpace: 'wrap'\n                },\n                children: [\"Index: \", game.players.some(player => player.position - 1 === index) ? game.players.find(player => player.position - 1 === index).index : '']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 622,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                sx: {\n                  color: game.players.some(player => player.position - 1 === index) ? 'white' : 'black',\n                  whiteSpace: 'wrap'\n                },\n                children: [\"Pos: \", index + 1]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 625,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                sx: {\n                  color: 'white',\n                  whiteSpace: 'wrap'\n                },\n                children: game.players.some(player => player.position - 1 === index) ? game.players.find(player => player.position - 1 === index).name : ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 628,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 611,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 7\n    }, this);\n  };\n  const renderMainMenu = () => {\n    return /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        maxWidth: 600,\n        width: '100%',\n        mx: 'auto',\n        mt: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          background: 'linear-gradient(180deg, #f5f9ff 0%, #e8f3ff 100%)',\n          p: 4,\n          borderTopLeftRadius: 8,\n          borderTopRightRadius: 8\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h3\",\n          sx: {\n            fontWeight: 'bold',\n            background: 'linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)',\n            WebkitBackgroundClip: 'text',\n            WebkitTextFillColor: 'transparent',\n            textShadow: '2px 2px 4px rgba(0,0,0,0.1)',\n            textAlign: 'center',\n            mb: 1\n          },\n          children: \"Online Multiplayer Ball Point Game\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 656,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 650,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          background: '#ffffff',\n          p: 4,\n          borderBottomLeftRadius: 8,\n          borderBottomRightRadius: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(Tabs, {\n          value: activeTab,\n          onChange: (e, newValue) => {\n            setActiveTab(newValue);\n            setPlayerName('');\n            setPlayerCount(MAX_PLAYERS);\n            setJoinGameId('');\n            setGame({});\n          },\n          sx: {\n            mb: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(Tab, {\n            label: \"CREATE GAME\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 683,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            label: \"JOIN GAME\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 684,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 676,\n          columnNumber: 11\n        }, this), activeTab === 0 ?\n        /*#__PURE__*/\n        // Create game form\n        _jsxDEV(Box, {\n          component: \"form\",\n          onSubmit: handleCreateGame,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            label: \"Your Name\",\n            required: true,\n            value: playerName,\n            onChange: e => {\n              if (e.target.value.length > 8) {\n                setError('Name cannot be more than 8 characters');\n              } else {\n                setError('');\n              }\n              setPlayerName(e.target.value);\n            },\n            sx: {\n              mb: 2\n            },\n            autoComplete: \"off\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 690,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            label: \"Number of Players\",\n            type: \"number\",\n            required: true,\n            value: playerCount,\n            onChange: e => setPlayerCount(Number(e.target.value)),\n            helperText: \"Requiring 5 players\",\n            sx: {\n              mb: 3\n            },\n            autoComplete: \"off\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 706,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            fullWidth: true,\n            variant: \"contained\",\n            type: \"submit\",\n            disabled: !playerName || playerCount < MAX_PLAYERS || playerCount > 10,\n            children: \"Create Game\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 717,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 689,\n          columnNumber: 13\n        }, this) :\n        /*#__PURE__*/\n        // Join game form\n        _jsxDEV(Box, {\n          component: \"form\",\n          onSubmit: handleJoinGame,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            label: \"Your Name\",\n            required: true,\n            value: playerName,\n            onChange: e => setPlayerName(e.target.value),\n            sx: {\n              mb: 2\n            },\n            autoComplete: \"off\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 729,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            label: \"Game Code\",\n            required: true,\n            value: joinGameId,\n            onChange: e => setJoinGameId(e.target.value),\n            sx: {\n              mb: 3\n            },\n            autoComplete: \"off\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 738,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            fullWidth: true,\n            variant: \"contained\",\n            type: \"submit\",\n            disabled: !playerName || !joinGameId,\n            children: \"Join Game\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 747,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 728,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 670,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mt: 2\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 766,\n      columnNumber: 11\n    }, this), !gameId ? renderMainMenu() : game.status === 'waiting' ? renderGame() : game.status === 'in_progress' ? renderGameProgress() : game.status === 'end' ? renderStatices() : /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 778,\n      columnNumber: 58\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 763,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"prWiifn6hqyppxUNmYpvE/fymn4=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","Alert","CircularProgress","Container","Card","Box","Typography","Tabs","Tab","TextField","Button","TableContainer","Table","TableHead","TableBody","TableCell","TableRow","axios","jsxDEV","_jsxDEV","MAX_PLAYERS","SERVER_URL","process","env","REACT_APP_SERVER_URL","WS_URL","REACT_APP_WS_URL","ws","WebSocket","App","_s","gameId","setGameId","useState","game","setGame","error","setError","activeTab","setActiveTab","playerId","setPlayerId","playerName","setPlayerName","playerCount","setPlayerCount","joinGameId","setJoinGameId","roundCount","setRoundCount","timeLeave","setTimeLeave","count","setCount","useEffect","onmessage","msg","data","JSON","parse","handleKeyDown","e","key","console","log","status","player","players","find","id","name","balls","ball","length","color","config","Math","floor","random","position","blocks","post","game_id","splice","then","res","catch","err","message","nextPlayer","includes","index","push","currentPlayer","p","playerWithCompleteBall","some","b","sort","join","map","newGame","results","currentRound","score","updatedPlayer","filter","document","addEventListener","timer","setInterval","isOwn","rounds","remainingTime","clearInterval","removeEventListener","handleCreateGame","preventDefault","player_count","round_count","handleJoinGame","startGame","flag","forEach","abs","player_id","renderCircle","useCallback","result","i","j","sx","background","marginTop","padding","display","flexDirection","alignItems","justifyContent","children","fileName","_jsxFileName","lineNumber","columnNumber","width","height","borderRadius","ml","renderGameProgress","currentRoundResult","backgroundColor","minHeight","mb","variant","className","border","Array","fill","_","totalBlocks","radius","angle","PI","centerX","centerY","x","cos","y","sin","mr","mt","left","top","whiteSpace","item","renderStatices","textAlign","fullWidth","type","onClick","size","align","component","scope","round","renderGame","disabled","label","required","value","onChange","Number","target","helperText","autoComplete","maxWidth","stringify","a","renderMainMenu","mx","borderTopLeftRadius","borderTopRightRadius","fontWeight","WebkitBackgroundClip","WebkitTextFillColor","textShadow","borderBottomLeftRadius","borderBottomRightRadius","newValue","onSubmit","severity","_c","$RefreshReg$"],"sources":["/Users/huanghao/Desktop/Ball Point Game/src/App.js"],"sourcesContent":["import React from 'react';\nimport {\n  Alert, CircularProgress, Container, Card, Box, Typography, Tabs, Tab, TextField, Button, TableContainer,\n  Table,\n  TableHead,\n  TableBody,\n  TableCell,\n  TableRow\n} from '@mui/material';\nimport axios from 'axios';\n\nconst MAX_PLAYERS = 5\n\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL || 'http://172.20.10.4:8080';\nconst WS_URL = process.env.REACT_APP_WS_URL || 'ws://172.20.10.4:8080/ws';\n\nconst ws = new WebSocket(WS_URL);\n\nfunction App() {\n  const [gameId, setGameId] = React.useState(null)\n  const [game, setGame] = React.useState(null)\n  const [error, setError] = React.useState(null)\n\n  const [activeTab, setActiveTab] = React.useState(0)\n  const [playerId, setPlayerId] = React.useState(null)\n  const [playerName, setPlayerName] = React.useState('')\n  const [playerCount, setPlayerCount] = React.useState(MAX_PLAYERS)\n  const [joinGameId, setJoinGameId] = React.useState('')\n  const [roundCount, setRoundCount] = React.useState(5)\n  const [timeLeave, setTimeLeave] = React.useState(120)\n  const [count, setCount] = React.useState(1)\n\n  React.useEffect(() => {\n    // sync with server\n    ws.onmessage = (msg) => {\n      const data = JSON.parse(msg.data)\n      if (data.gameId === gameId) {\n        setGame(data)\n      }\n    }\n    const handleKeyDown = (e) => {\n      if (e.key === 'v') {\n        console.log('Game state:', game);\n        console.log('Current playerId:', playerId);\n        return;\n      }\n      if (gameId && game && game.status === 'in_progress') {\n        const player = game.players.find(player => player.id === playerId)\n        if (!player) {\n          console.log('Player not found with ID:', playerId);\n          console.log('Available players:', game.players);\n          return\n        }\n        console.log('Processing key:', e.key, 'for player:', player.name);\n        const balls = player.balls\n        const ball = balls[balls.length - 1]\n        // 按键 r\n        if (e.key === 'r') {\n          if (ball && ball.color === 'red') {\n            if (count === 2) {\n              ball.color = game.config.balls[Math.floor(Math.random() * 3)]\n              ball.position += 1\n              if (ball.position > game.config.blocks) {\n                ball.position = 1\n              }\n              setCount(1);\n            } else {\n              setCount(2);\n            }\n          }\n          axios.post(`${SERVER_URL}/update_game`, {\n            game_id: gameId,\n            players: game.players\n          })\n        }\n        // 按键 g\n        if (e.key === 'g') {\n          if (ball && ball.color === 'green') {\n            if (count === 2) {\n              ball.color = game.config.balls[Math.floor(Math.random() * 3)]\n              ball.position += 1\n              if (ball.position > game.config.blocks) {\n                ball.position = 1\n              }\n              setCount(1);\n            } else {\n              setCount(2);\n            }\n          }\n          axios.post(`${SERVER_URL}/update_game`, {\n            game_id: gameId,\n            players: game.players\n          })\n        }\n        // 按键 b\n        if (e.key === 'b') {\n          if (ball && ball.color === 'blue') {\n            if (count === 2) {\n              ball.color = game.config.balls[Math.floor(Math.random() * 3)]\n              ball.position += 1\n              if (ball.position > game.config.blocks) {\n                ball.position = 1\n              }\n              setCount(1);\n            } else {\n              setCount(2);\n            }\n          }\n          axios.post(`${SERVER_URL}/update_game`, {\n            game_id: gameId,\n            players: game.players\n          })\n        }\n        if (ball && ball.position > game.config.blocks) {\n          balls.splice(balls.length - 1, 1)\n          axios.post(`${SERVER_URL}/update_game`, {\n            game_id: gameId,\n            players: game.players\n          }).then(res => {\n            setGame(res.data)\n          }).catch(err => {\n            setError(err.message)\n          })\n        }\n        if (e.key === 'Enter') {\n          if (!ball) {\n            console.log('No ball to pass');\n            return;\n          }\n          console.log('Current ball:', ball);\n          console.log('Current ball process:', ball.process);\n          // by ball position find the player\n          const nextPlayer = game.players.find(player => player.position === ball.position)\n          console.log('Next player:', nextPlayer);\n          if (nextPlayer && nextPlayer.id !== player.id) {\n            console.log('Attempting to pass ball to player:', nextPlayer.name);\n            // Add the next player to the ball's process\n            if (!ball.process.includes(nextPlayer.index)) {\n              console.log('Ball passed successfully');\n              ball.process.push(nextPlayer.index)\n              ball.position = nextPlayer.position\n              ball.playerId = nextPlayer.id\n              ball.color = game.config.balls[Math.floor(Math.random() * 3)]\n              nextPlayer.balls = [ball, ...nextPlayer.balls]\n            } else {\n              console.log('Ball already passed to this player');\n            }\n          } else {\n            console.log('Invalid pass target');\n          }\n          balls.splice(balls.length - 1, 1)\n          axios.post(`${SERVER_URL}/update_game`, {\n            game_id: gameId,\n            players: game.players\n          }).then(res => {\n            setGame(res.data)\n          }).catch(err => {\n            setError(err.message)\n          })\n        }\n        // 按键 n\n        if (e.key === 'n') {\n          if (player.index === 1) {\n            player.balls.push({\n              color: game.config.balls[Math.floor(Math.random() * 3)],\n              position: player.position,\n              process: [player.index],\n              playerId: player.id,\n              index: player.index\n            })\n          }\n          axios.post(`${SERVER_URL}/update_game`, {\n            game_id: gameId,\n            players: game.players\n          }).then(res => {\n            setGame(res.data)\n          }).catch(err => {\n            setError(err.message)\n          })\n        }\n\n        if (e.key === 'p') {\n          const currentPlayer = game.players.find(p => p.id === playerId);\n          // 只有 index 1 的玩家可以删除球\n          if (currentPlayer && currentPlayer.index === 1) {\n            // 找到所有玩家中有完成传递球的玩家\n            const playerWithCompleteBall = game.players.find(player => \n              player.balls.some(b => \n                b.process && \n                b.process.sort().join('') === '1' + game.players.map(p => p.index).sort().join('')\n              )\n            );\n\n            if (playerWithCompleteBall) {\n              const newGame = { ...game };\n              // 更新分数\n              newGame.results[game.currentRound - 1].score += 1;\n              \n              // 找到对应的玩家并更新他的球\n              const updatedPlayer = newGame.players.find(p => p.id === playerWithCompleteBall.id);\n              if (updatedPlayer) {\n                updatedPlayer.balls = updatedPlayer.balls.filter(b => \n                  !b.process || \n                  b.process.sort().join('') !== '1' + game.players.map(p => p.index).sort().join('')\n                );\n              }\n\n              setGame(newGame);\n\n              // 更新游戏状态\n              axios.post(`${SERVER_URL}/update_game`, {\n                game_id: gameId,\n                players: newGame.players\n              }).then(res => {\n                setGame(res.data);\n              }).catch(err => {\n                setError(err.message);\n              });\n\n              // 更新分数\n              axios.post(`${SERVER_URL}/update_results`, {\n                game_id: gameId,\n                results: newGame.results\n              }).then(res => {\n                setGame(res.data);\n              }).catch(err => {\n                setError(err.message);\n              });\n            }\n          }\n        }\n      }\n    }\n    document.addEventListener('keydown', handleKeyDown)\n\n    const timer = setInterval(() => {\n      if (game && game.status === 'in_progress' && game.players.find(player => player.id === playerId).isOwn) {\n        const newGame = { ...game }\n        setTimeLeave(timeLeave - 1)\n        if (timeLeave < 0 && newGame.currentRound < newGame.config.rounds) {\n          newGame.currentRound += 1\n          newGame.status = 'waiting'\n          newGame.remainingTime = 120\n          setTimeLeave(120)\n        } else if (timeLeave < 0 && newGame.currentRound === newGame.config.rounds) {\n          newGame.status = 'end'\n          clearInterval(timer)\n        }\n        setGame(newGame)\n        axios.post(`${SERVER_URL}/update_round_time_status`, {\n          game_id: gameId,\n          remainingTime: timeLeave,\n          status: newGame.status,\n          currentRound: newGame.currentRound\n        })\n      }\n    }, 1000)\n    return () => {\n      clearInterval(timer)\n      document.removeEventListener('keydown', handleKeyDown)\n    }\n  }, [game, gameId, playerId, timeLeave])\n\n  const handleCreateGame = (e) => {\n    e.preventDefault()\n    axios.post(`${SERVER_URL}/create_game`, {\n      name: playerName,\n      player_count: playerCount,\n      round_count: 5\n    }).then(res => {\n      setGameId(res.data.game.gameId)\n      setGame(res.data.game)\n      setPlayerId(res.data.playerId)\n      setError(null)\n    }).catch(err => {\n      setError(err.message)\n    })\n  }\n\n  const handleJoinGame = (e) => {\n    e.preventDefault()\n    axios.post(`${SERVER_URL}/join_game`, {\n      name: playerName,\n      game_id: joinGameId\n    }).then(res => {\n      setGameId(res.data.game.gameId)\n      setGame(res.data.game)\n      setPlayerId(res.data.playerId)\n      setError(null)\n    }).catch(err => {\n      setError(err.message)\n    })\n  }\n\n  const startGame = () => {\n    // players should be more than 1\n    if (game.players.length < game.config.playerCount) {\n      setError(`Minimum ${game.config.playerCount} players required to start the game`)\n      return\n    }\n    let flag = 0\n    // players positon should be unique\n    // players position should be between 1 and 20\n    // players position should be at least 2 blocks apart\n    game.players.forEach((player, index) => {\n      if (player.position < 1 || player.position > game.config.blocks) {\n        flag = 1\n      }\n      if (index > 0 && Math.abs(player.position - game.players[index - 1].position) < 2) {\n        flag = 2\n      }\n    })\n    if (flag === 1) {\n      setError('Invalid player position')\n      return\n    }\n    if (flag === 2) {\n      setError('Players should be at least 2 blocks apart')\n      return\n    }\n    setTimeLeave(120) // Reset time to 120 seconds when starting the game\n    const newGame = { ...game };\n    newGame.config.roundCount = roundCount;\n    setGame(newGame);\n    axios.post(`${SERVER_URL}/start_game`, {\n      game_id: gameId,\n      player_id: playerId,\n      players: game.players,\n      round_count: roundCount\n    }).then(res => {\n      setGame(res.data)\n      setError(null)\n    }).catch(err => {\n      setError(err.message)\n    })\n  }\n\n\n  const renderCircle = React.useCallback((index) => {\n    let result = [];\n    for (let i = 0; i < game.players.length; i++) {\n      const player = game.players[i]\n      for (let j = 0; j < game.players[i].balls.length; j++) {\n        if (game.players[i].balls[j].position - 1 === index) {\n          result.push(\n            <Box\n              key={game.players[i].balls[j].position}\n              sx={{\n                background: \"gray\",\n                marginTop: \"10px\",\n                padding: 2,\n                display: 'flex',\n                flexDirection: \"row\",\n                alignItems: 'center',\n                justifyContent: 'center'\n              }}>\n              <span>{player.name}:{game.players[i].balls[j].process.sort().join('') === '1' + game.players.map(player => player.index).sort().join('') ? 'end' : ''}</span>\n              <Box sx={{ width: 20, height: 20, borderRadius: '50%', background: game.players[i].balls[j].color, ml: 1 }} >\n              </Box>\n            </Box>\n          )\n        }\n      }\n    }\n    return result\n  }, [game])\n  const renderGameProgress = () => {\n    const currentRoundResult = game.results[game.currentRound - 1] || { score: 0 };\n    return (\n      <Box sx={{ p: 3, backgroundColor: 'background.default', minHeight: '100vh' }}>\n        <Box sx={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 3\n        }}>\n          <Box>\n            <Typography variant=\"h4\" sx={{ mb: 1, color: 'primary.main' }}>\n              Game ID: {game.gameId} &nbsp;&nbsp; Status: {game.status === 'waiting' ? 'Waiting' : game.status === 'in_progress' ? 'In Progress' : 'Completed'}\n            </Typography>\n            <Typography variant=\"h5\" sx={{ color: 'text.primary' }}>\n              Player Name: {game.players.find(player => player.id === playerId).name}\n            </Typography>\n            <Typography variant=\"h5\" sx={{ color: 'text.primary' }}>\n              Current Round: {game.currentRound} / {game.config.rounds} Score: {currentRoundResult.score}\n            </Typography>\n            <Typography variant=\"h5\" sx={{ color: 'text.primary' }}>\n              Remaining time: {game.players.find(player => player.id === playerId).isOwn ? timeLeave : game.remainingTime - 1} seconds\n            </Typography>\n            <Typography variant=\"h5\" sx={{ color: 'text.primary' }}>\n              Balls: {game.players.find(player => player.id === playerId).balls.map(ball => ball.color).join(', ')}\n            </Typography>\n          </Box>\n        </Box>\n        <Box className=\"flex justify-center items-center\" sx={{ border: '1px solid #ccc', borderRadius: 1, p: 2 }}>\n          <Box className=\"flex justify-start flex-wrap\" sx={{ width: 1000, height: 1000, position: 'relative' }}>\n            {\n              Array(game.config.blocks).fill(0).map((_, index) => {\n                const totalBlocks = game.config.blocks;\n                const radius = 500; // 设定半径\n                const angle = (index / totalBlocks) * 2 * Math.PI; // 计算角度\n                const centerX = 540; // 圆心 X 坐标\n                const centerY = 540; // 圆心 Y 坐标\n                const x = centerX + radius * Math.cos(angle) - 50; // X 位置（调整偏移量）\n                const y = centerY + radius * Math.sin(angle) - 50; // Y 位置（调整偏移量）\n\n                return (\n                  <Box key={index} className=\"flex flex-col justify-center items-center\" sx={{\n                    width: 100,\n                    minHeight: 100,\n                    border: '1px solid #ccc',\n                    mr: 1,\n                    mt: 1,\n                    background: 'white',\n                    position: 'absolute',\n                    left: x,\n                    top: y,\n                  }}>\n                    <Typography sx={{ color: 'black', whiteSpace: 'wrap', display: game.players.some(player => player.position - 1 === index) ? 'block' : 'none' }}>\n                      Index: {game.players.some(player => player.position - 1 === index) ? game.players.find(player => player.position - 1 === index).index : ''}\n                    </Typography>\n                    <Typography sx={{ color: 'black', whiteSpace: 'wrap', display: 'block' }}>\n                      {game.players.some(player => player.position - 1 === index) ? game.players.find(player => player.position - 1 === index).name : ''}\n                    </Typography>\n                    <Box sx={{ display: 'flex', flexDirection: \"column\", justifyContent: 'center', alignItems: 'center', width: \"100%\" }}>\n                      {renderCircle(index).map((item) => item)}\n                    </Box>\n                  </Box>\n                )\n              })\n            }\n          </Box>\n        </Box>\n      </Box>\n    )\n  }\n\n  const renderStatices = () => {\n    return (\n      <Box sx={{ p: 3, backgroundColor: 'background.default', minHeight: '100vh', display: \"flex\", flexDirection: \"column\" }}>\n        <Typography variant=\"h4\" sx={{ mb: 3, textAlign: 'center', color: 'primary.main' }}>\n          Game Summary\n        </Typography>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          type=\"submit\"\n          onClick={() => {\n            setGameId(null)\n            setGame(null)\n            setPlayerId(null)\n            setError(null)\n\n            setActiveTab(0)\n            setPlayerCount(MAX_PLAYERS)\n            setPlayerName('')\n            setRoundCount(5)\n            setTimeLeave(120)\n            setCount(1)\n          }}\n          sx={{ mb: 3 }}\n        >\n          Restart Game\n        </Button>\n        <TableContainer sx={{ mb: 2 }}>\n          <Table size=\"medium\">\n            <TableHead>\n              <TableRow>\n                <TableCell>Round</TableCell>\n                <TableCell align=\"right\">Current Score</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {\n                game.results.map((result, index) => (\n                  <TableRow key={index}>\n                    <TableCell component=\"th\" scope=\"row\">\n                      Round {result.round}\n                    </TableCell>\n                    <TableCell align=\"right\">{result.score}</TableCell>\n                  </TableRow>\n                ))\n              }\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </Box>\n    )\n  }\n\n  const renderGame = () => {\n    return (\n      <Box sx={{ p: 3, backgroundColor: 'background.default', minHeight: '100vh' }}>\n        <Box sx={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 3\n        }}>\n          <Box>\n            <Typography variant=\"h4\" sx={{ mb: 1, color: 'primary.main' }}>\n              Game ID: {game.gameId} &nbsp;&nbsp;\n              {\n                game.players.some(player => player.id === playerId) && game.players.find(player => player.id === playerId).isOwn && (\n                  <Button variant=\"contained\" onClick={startGame} disabled={game.status !== 'waiting'}>\n                    Start Game\n                  </Button>\n                )\n              }\n            </Typography>\n            <Typography variant=\"h5\" sx={{ color: 'text.primary' }}>\n              Current Round: {game.currentRound}\n            </Typography>\n            <Typography variant=\"h5\" sx={{ color: 'text.primary' }}>\n              Status: {game.status === 'waiting' ? 'Waiting' : game.status === 'in_progress' ? 'In Progress' : 'Completed'}\n            </Typography>\n            <TextField\n              fullWidth\n              label=\"Round Score target\"\n              type=\"number\"\n              required\n              value={roundCount}\n              onChange={(e) => setRoundCount(Number(e.target.value))}\n              helperText=\"Round Score target\"\n              sx={{ mb: 3, display: game.players.find(player => player.id === playerId).isOwn ? 'block' : 'none' }}\n              autoComplete=\"off\"\n            />\n          </Box>\n        </Box>\n\n        {/* 添加分数表格 */}\n        <TableContainer sx={{ mb: 3, maxWidth: 400 }}>\n          <Table size=\"medium\">\n            <TableHead>\n              <TableRow>\n                <TableCell>Round</TableCell>\n                <TableCell align=\"right\">Score</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {\n                game.results.map((result, index) => (\n                  <TableRow key={index}>\n                    <TableCell component=\"th\" scope=\"row\">\n                      Round {result.round}\n                    </TableCell>\n                    <TableCell align=\"right\">{result.score}</TableCell>\n                  </TableRow>\n                ))\n              }\n            </TableBody>\n          </Table>\n        </TableContainer>\n\n        <Box sx={{ border: '1px solid #ccc', borderRadius: 1, display: game.players.find(player => player.id === playerId).isOwn ? 'block' : 'none' }}>\n          {\n            game.players.map((player, index) => (\n              <Box key={index} sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mt: 1 }}>\n                <Typography variant=\"h6\" sx={{ color: 'text.primary' }}>\n                  Player Name: {player.name} Index: {player.index} ID: {player.id}\n                </Typography>\n                <TextField\n                  label=\"Position\"\n                  type=\"text\"\n                  value={player.position}\n                  onChange={(e) => {\n                    if (e.target.value < 1 || e.target.value > game.config.blocks) {\n                      setError('Position must be between 1 and 20')\n                      return\n                    }\n                    setError(null)\n                    const newGame = { ...game }\n                    newGame.players[index].position = Number(e.target.value)\n                    // sort players by position\n                    const players = JSON.parse(JSON.stringify(newGame.players)).sort((a, b) => a.position - b.position)\n                    newGame.players.forEach((player, index) => {\n                      players.forEach((p, i) => {\n                        if (player.id === p.id) {\n                          player.index = i + 1\n                        }\n                      })\n                    })\n                    setGame(newGame)\n                    axios.post(`${SERVER_URL}/update_game`, {\n                      game_id: gameId,\n                      players: newGame.players\n                    }).then(res => {\n                      setGame(res.data)\n                    }).catch(err => {\n                      setError(err.message)\n                    })\n                  }}\n                />\n              </Box>\n            ))\n          }\n        </Box>\n        <Box className=\"flex justify-center items-center\" sx={{ border: '1px solid #ccc', borderRadius: 1, p: 2 }}>\n          <Box className=\"flex justify-start flex-wrap relative\" sx={{ width: 1000, height: 1000, position: 'relative' }}>\n            {\n              Array(game.config.blocks).fill(0).map((_, index) => {\n                const totalBlocks = game.config.blocks;\n                const radius = 500; // 设定半径\n                const angle = (index / totalBlocks) * 2 * Math.PI; // 计算角度\n                const centerX = 540; // 圆心 X 坐标\n                const centerY = 540; // 圆心 Y 坐标\n                const x = centerX + radius * Math.cos(angle) - 50; // X 位置（调整偏移量）\n                const y = centerY + radius * Math.sin(angle) - 50; // Y 位置（调整偏移量）\n\n                return (\n                  <Box key={index} className=\"flex flex-col justify-center items-center\" sx={{\n                    width: 100,\n                    height: 100,\n                    border: '1px solid #ccc',\n                    mr: 1,\n                    mt: 1,\n                    background: game.players.some(player => player.position - 1 === index) ? 'blue' : 'white',\n                    position: 'absolute',\n                    left: x,\n                    top: y,\n                  }}>\n                    <Typography sx={{ color: game.players.some(player => player.position - 1 === index) ? 'white' : 'black', whiteSpace: 'wrap' }}>\n                      Index: {game.players.some(player => player.position - 1 === index) ? game.players.find(player => player.position - 1 === index).index : ''}\n                    </Typography>\n                    <Typography sx={{ color: game.players.some(player => player.position - 1 === index) ? 'white' : 'black', whiteSpace: 'wrap' }}>\n                      Pos: {index + 1}\n                    </Typography>\n                    <Typography sx={{ color: 'white', whiteSpace: 'wrap' }}>\n                      {game.players.some(player => player.position - 1 === index) ? game.players.find(player => player.position - 1 === index).name : ''}\n                    </Typography>\n                  </Box>\n                )\n              })\n            }\n          </Box>\n        </Box>\n      </Box>\n    )\n  }\n\n  const renderMainMenu = () => {\n    return (\n      <Card sx={{\n        maxWidth: 600,\n        width: '100%',\n        mx: 'auto',\n        mt: 4\n      }}>\n        {/* Top section with title and subtitle */}\n        <Box sx={{\n          background: 'linear-gradient(180deg, #f5f9ff 0%, #e8f3ff 100%)',\n          p: 4,\n          borderTopLeftRadius: 8,\n          borderTopRightRadius: 8\n        }}>\n          <Typography variant=\"h3\" sx={{\n            fontWeight: 'bold',\n            background: 'linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)',\n            WebkitBackgroundClip: 'text',\n            WebkitTextFillColor: 'transparent',\n            textShadow: '2px 2px 4px rgba(0,0,0,0.1)',\n            textAlign: 'center',\n            mb: 1\n          }}>\n            Online Multiplayer Ball Point Game\n          </Typography>\n        </Box>\n\n        {/* Bottom section with form */}\n        <Box sx={{\n          background: '#ffffff',\n          p: 4,\n          borderBottomLeftRadius: 8,\n          borderBottomRightRadius: 8\n        }}>\n          <Tabs value={activeTab} onChange={(e, newValue) => {\n            setActiveTab(newValue);\n            setPlayerName('');\n            setPlayerCount(MAX_PLAYERS);\n            setJoinGameId('');\n            setGame({});\n          }} sx={{ mb: 3 }}>\n            <Tab label=\"CREATE GAME\" />\n            <Tab label=\"JOIN GAME\" />\n          </Tabs>\n\n          {activeTab === 0 ? (\n            // Create game form\n            <Box component=\"form\" onSubmit={handleCreateGame}>\n              <TextField\n                fullWidth\n                label=\"Your Name\"\n                required\n                value={playerName}\n                onChange={(e) => {\n                  if (e.target.value.length > 8) {\n                    setError('Name cannot be more than 8 characters');\n                  } else {\n                    setError('');\n                  }\n                  setPlayerName(e.target.value)\n                }}\n                sx={{ mb: 2 }}\n                autoComplete=\"off\"\n              />\n              <TextField\n                fullWidth\n                label=\"Number of Players\"\n                type=\"number\"\n                required\n                value={playerCount}\n                onChange={(e) => setPlayerCount(Number(e.target.value))}\n                helperText=\"Requiring 5 players\"\n                sx={{ mb: 3 }}\n                autoComplete=\"off\"\n              />\n              <Button\n                fullWidth\n                variant=\"contained\"\n                type=\"submit\"\n                disabled={!playerName || playerCount < MAX_PLAYERS || playerCount > 10}\n              >\n                Create Game\n              </Button>\n            </Box>\n          ) : (\n            // Join game form\n            <Box component=\"form\" onSubmit={handleJoinGame}>\n              <TextField\n                fullWidth\n                label=\"Your Name\"\n                required\n                value={playerName}\n                onChange={(e) => setPlayerName(e.target.value)}\n                sx={{ mb: 2 }}\n                autoComplete=\"off\"\n              />\n              <TextField\n                fullWidth\n                label=\"Game Code\"\n                required\n                value={joinGameId}\n                onChange={(e) => setJoinGameId(e.target.value)}\n                sx={{ mb: 3 }}\n                autoComplete=\"off\"\n              />\n              <Button\n                fullWidth\n                variant=\"contained\"\n                type=\"submit\"\n                disabled={!playerName || !joinGameId}\n              >\n                Join Game\n              </Button>\n            </Box>\n          )}\n        </Box>\n      </Card>\n    )\n  }\n\n  return (\n    <Container>\n      {\n        error && (\n          <Alert severity=\"error\" sx={{ mt: 2 }}>\n            {error}\n          </Alert>\n        )\n      }\n      {\n        !gameId ?\n          renderMainMenu() :\n          game.status === 'waiting' ?\n            renderGame() :\n            game.status === 'in_progress' ?\n              renderGameProgress() :\n              game.status === 'end' ? renderStatices() : <CircularProgress />\n      }\n    </Container>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}